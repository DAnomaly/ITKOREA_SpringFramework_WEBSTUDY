<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>네이버 : 회원가입</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../styles/reset.css">
    <link rel="stylesheet" type="text/css" href="../styles/join.css">
    <style>
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1 id="naver-logo">NAVER</h1>
      </header>
      <section>
      <form id="join_form">
        <article class="row_group">
          <div class="join_row">
            <label for="id"><h3>아이디</h3></label>
            <label for="id">
              <span class="ps_box">
                <input type="text" id="id" name="id" title="ID" maxlength="19"><span class="setp_url">@naver.com</span>
              </span>
            </label>
          </div>
          <!-- 아이디 체크결과 -->
          <p class="chk-p" id="id-chk"></p>
          <div class="join_row">
            <label for="pswd1"><h3>비밀번호</h3></label>
            <label for="pswd1">
              <span class="ps_box">
                <input type="password" id="pswd1" name="pswd1" title="PASSWORD" maxlength="19"><span class="setp_url" id="pwd1-icon"><i class="fas fa-lock"></i></span>
              </span>
            </label>
          </div>
          <!-- 비밀번호 체크결과 -->
          <p class="chk-p" id="pwd1-chk"></p>
          <div class="join_row">
            <label for="pswd2"><h3>비밀번호 재확인</h3></label>
            <label for="pswd2">
              <span class="ps_box">
                <input type="password" id="pswd2" name="pswd2" title="PASSWORD" maxlength="19"><span class="setp_url" id="pwd2-icon"><i class="fas fa-lock"></i></span>
              </span>
            </label>
          </div>
          <!-- 비밀번호 재확인 결과 -->
          <p class="chk-p" id="pwd2-chk"></p>
        </article>
        <article class="row_group">
          <div class="join_row">
            <label for="name"><h3>이름</h3></label>
            <label for="name">
              <span class="ps_box">
                <input type="text" id="name" name="name" title="NAME" maxlength="19">
              </span>
            </label>
          </div>
          <p class="chk-p" id="name-chk"></p> 
          <div class="join_row">
            <label for="year"><h3>생년월일</h3></label>
            <div class="bir_wrap">
              <label for="year">
                <span class="ps_box">
                  <input type="text" id="year" name="year" title="BirthYear" placeholder="년(4자)" maxlength="4">
                </span>
              </label>
              <label for="month">
                <span class="ps_box">
                  <select id="month" name="month">
                    <option value>월</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                  </select>
                </span>
              </label>
              <label for="day">
                <span class="ps_box">
                  <input type="text" id="day" name="day" title="BirthDay" placeholder="일" maxlength="2">
                </span>
              </label>
            </div>
          </div>
          <p class="chk-p" id="bir-chk"><!-- 생년월일 검사 --></p>
          <div class="join_row">
            <label for="gender"><h3>성별</h3></label>
            <label for="gender">
              <span class="ps_box">
                <select id="gender" name="gender">
                  <option value>성별</option>
                  <option value="male">남자</option>
                  <option value="female">여자</option>
                  <option value="none">선택안함</option>
                </select>
              </span>
            </label>
          </div>
          <p class="chk-p" id="gender-chk"><!-- 성별 검사 --></p>
          <div class="join_row">
            <label for="chk_email"><h3>본인 확인 이메일<span>&#40;선택&#41;</span></h3></label>
            <label for="chk_email">
              <span class="ps_box">
                <input type="text" id="chk_email" name="chk_email" title="본인확인이메일" placeholder="선택입력" maxlength="29">
              </span>
            </label>
          </div>
          <p class="chk-p" id="email-chk"><!-- 본인확인이메일 검사 --></p>
        </article>
        <article>
          <div class="join_row">
            <label for="phone"><h3>휴대전화</h3></label>
            <label for="chk_email">
              <span class="ps_box">
                <select id="location" name="location">
                  <option value="505">니카라과 +505</option>
                  <option value="82" selected>대한민국 +82</option>
                  <option value="45">덴마크 +45</option>
                </select>
              </span>
            </label>
            <div id="phone_div">
              <label for="phone">
                <span class="ps_box phone_box1">
                  <input type="text" id="phone" name="phone" placeholder="전화번호 입력" maxlength="19">
                </span>
              </label>
              <label for="btn_phone">
                <button type="button" id="btn_phone" onclick="javascript:void(0)">인증번호 받기</button>
              </label>
            </div>
            <label for="chk_phone">
              <span class="ps_box" id="chk_phone_box">
                <input type="text" id="chk_phone" name="chk_phone" placeholder="인증번호 입력하세요" maxlength="10" disabled>
              </span>
            </label>
          </div>
          <p class="chk-p" id="phone-chk-p"><!-- 전화번호 검사--></p>
        </article>
        <article>
          <button id="submit_button" type="submit">가입하기</button>
        </article>
        </form>
      </section>
      <footer>
        <!--이용약관,개인정보처리방침,책임의 한계와 법적고지,회원정보 고객센터-->
        <ul>
          <li><a href="javascript:void(0);">이용약관</a></li>
          <li><a href="javascript:void(0);"><strong>개인정보처리방침</strong></a></li>
          <li><a href="javascript:void(0);">책임의 한계와 법적고지</a></li>
          <li><a href="javascript:void(0);">회원정보 고객센터</a></li>
        </ul>
        <!--© NAVER Corp.-->
        <p><a><strong>NAVER</strong></a> Copyright &copy;<a>NAVER Corp.</a> All Rights Reserved.</p>
      </footer>
    </div>
    <script type="text/javascript">
    	var id = document.getElementById('id');
    	id.addEventListener('blur',fn_idCheck);
    	function fn_idCheck(){
    		let ret = false;
    		var chk_p = document.getElementById('id-chk');
			var regID = /^[a-z0-9][a-z0-9_-]{4,19}$/;
			if(id.value == ''){
				chk_p.textContent = '필수 정보입니다.';
				chk_p.style.color = 'red';
				return;
			}
    		if(!regID.test(id.value)){
				chk_p.textContent = '5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.';
				chk_p.style.color = 'red';
				return;
    		} else {
				chk_p.textContent = '멋진 아이디네요!';
				chk_p.style.color = '#03C75A';
				ret = true;
				return ret;
    		}
    	}
    	
    	// 비밀번호 검사
    	var pswd1 = document.getElementById('pswd1');
    	pswd1.addEventListener('blur',fn_pwd1Check);
    	function fn_pwd1Check(){
    		var chk_p = document.getElementById('pwd1-chk');
    		var icon = document.getElementById('pwd1-icon');
    		var reg = /(?=.*\d{1,20})(?=.*[a-zA-Z]{2,20}).{8,20}$/;
    		let ret = false;
			if(pswd1.value == ''){
				chk_p.textContent = '필수 정보입니다.';
				icon.innerHTML = '<i class="fas fa-lock"></i>';
				icon.style.color = 'black';			          
				return;
			}
    		if(!reg.test(pswd1.value)){
				chk_p.textContent = '8~20자 영문 대 소문자, 숫자, 특수문자를 사용하세요.';
				icon.innerHTML = '<span>사용불가</span>&nbsp;<i class="fas fa-lock"></i>';
				icon.style.color = 'red';
				return;
    		} else {
				chk_p.textContent = '';
				icon.innerHTML = '<span>안전</span>&nbsp;<i class="fas fa-lock"></i>';
				icon.style.color = '#03C75A';
				ret = true;
				return ret;
    		}
    	}
    	
    	// 비밀번호 재확인 검사
    	var pswd2 = document.getElementById('pswd2');
    	pswd2.addEventListener('blur',fn_pwd2Check);
    	function fn_pwd2Check() {
    		var chk_p = document.getElementById('pwd2-chk');
    		var icon = document.getElementById('pwd2-icon');
    		let ret = false;
			if(pswd2.value == ''){
				chk_p.textContent = '필수 정보입니다.';
				icon.innerHTML = '<i class="fas fa-lock"></i>';
				icon.style.color = 'black';			          
				return;
			}
    		if(pswd2.value != pswd1.value){
				chk_p.textContent = '비밀번호가 일치하지 않습니다.';
				icon.innerHTML = '<i class="fas fa-lock"></i>';
				icon.style.color = 'black';
				return;
    		} else {
				chk_p.textContent = '';
				icon.innerHTML = '<i class="fas fa-lock"></i>';
				icon.style.color = '#03C75A';
				ret = true;
				return ret;
    		}
    	}
    	
    	// 이름 검사
    	var nm = document.getElementById('name');
    	nm.addEventListener('blur',fn_nameCheck);
    	function fn_nameCheck() {
    		var chk_p = document.getElementById('name-chk');
    		var reg = /^[a-zA-Z가-힣]+$/;
    		let ret = false;
    		if(nm.value == ''){
    			chk_p.textContent = '필수 정보입니다.';
    			return;
    		} else if(!reg.test(nm.value)){ 
    			chk_p.textContent = '한글과 영문 대 소문자를 사용하세요. (특수기호, 공백 사용 불가)';
    			return;
    		}else {
    			chk_p.textContent = '';
    			ret = true;
    			return ret;
    		}
    	}
    	
    	
    	// 생년월일 검사
    	var year = document.getElementById('year');
    	var month = document.getElementById('month');
    	var day = document.getElementById('day');
		var dayRegExp = /^\d{4}-\d+-(0[1-9]|[12][0-9]|3[0-1])$/;
		var now = new Date();
    	var bir14 = new Date();
    	bir14.setFullYear(bir14.getFullYear() - 14);
    	function birth_chk_f() {
    		var chk_p = document.getElementById('bir-chk');
    		var birth = year.value + '-' + month.value + '-' + day.value;
    		var date_birth = new Date(birth);
    		let ret = false;
    		if(year.value.length < 4) {
    			chk_p.textContent = '태어난 년도 4자리를 정확하게 입력하세요.';
    		} else if(month.value == '') {
    			chk_p.textContent = '태어난 월을 선택하세요.';
    		} else if(!(Number(day.value) >= 1 && Number(day.value) <= 31)) {
    			chk_p.textContent = '태어난 일(날짜) 2자리를 정확하게 입력하세요.';
    		} else if (!dayRegExp.test(birth)){
    			chk_p.textContent = '생년월일을 다시 확인해주세요.'
    		} else if(year.value < now.getFullYear() - 100) {
    			chk_p.textContent = '정말이세요?';
    		} else if(date_birth > now){
    			chk_p.textContent = '미래에서 오셨군요. ^^';
    		} else if(date_birth > bir14){
    			chk_p.textContent = '만 14세 미만의 어린이는 보호자 동의가 필요합니다.';
    		} else {
    			ret = true;
    			chk_p.textContent = '';
    			return ret;
    		}
    	}
    	year.addEventListener('blur',birth_chk_f);
    	month.addEventListener('blur',birth_chk_f);
    	day.addEventListener('blur',birth_chk_f);
    	
    	// 성별
    	var gender = document.getElementById('gender');
    	gender.addEventListener('blur',fn_birthdayCheck);
    	function fn_birthdayCheck() {
    		let ret = false;
    		var chk_p = document.getElementById('gender-chk');
			if(gender.value == ''){
				chk_p.textContent = '필수 정보입니다.';
			} else {
				chk_p.textContent = '';
				ret = true;
			}
			return ret;
    	}
    	
    	
    	// 본인 확인 이메일
    	var chk_email = document.getElementById('chk_email');
    	chk_email.addEventListener('blur',fn_emailCheck);
    	function fn_emailCheck() {
    		let ret = false;
    		var chk_p = document.getElementById('email-chk');
    		var reg = /^[a-zA-Z0-9]+@[a-zA-Z0-9]+([.]+[a-zA-Z0-9]+)+$/;
    		if (chk_email.value == ''){
    			chk_p.textContent = '';
    		} else if(!reg.test(chk_email.value)){
    			chk_p.textContent = '이메일 주소를 다시 확인해주세요.';
    		} else {
    			chk_p.textContent = '';
    			ret = true;
    		}
   			return ret;
    	}
    	
    	// 전화번호 입력
    	var phone = document.getElementById('phone');
    	phone.addEventListener('blur', fn_inputPhoneCheck);
    	function fn_inputPhoneCheck () {
    		let ret = false;
    		var chk_p = document.getElementById('phone-chk-p');
    		if( phone.value == '' ) {
    			chk_p.textContent = '필수 정보입니다.';
    		} else {
    			chk_p.textContent = '';
    			ret = true;
    		}
   			return ret;
    	}
    	
    	// 전화번호 확인
    	var btn_phone = document.getElementById('btn_phone');
    	btn_phone.addEventListener('click',fn_btnPhoneCheck);
    	function fn_btnPhoneCheck () {
    		let ret = false;
    		var phoneNumber = trim(phone.value).split('-').join('');
    		var reg = /^010[0-9]{7,8}$/;
    		if(!reg.test(phoneNumber)) {
    			chk_p.textContent = '형식에 맞지 않는 번호입니다.';
    		} else {
    			chk_p.textContetn = '';
    			ret = true;
    		}
    		return ret;
    	} 
    	
    	//	document.getElementById('btn_join').addEventListener('click',function() { });
    	document.forms.join_form.addEventListener('submit',function() {
    		if (fn_idCheck() &&
    			fn_pwd1Check() &&
    			fn_pwd2Check() &&
    			fn_nameCheck() &&
    			fn_birthdayCheck() &&
    			fn_inputPhoneCheck() &&
    			fn_btnPhoneCheck()
    		) {
    			if(confirm('가입할까요?')) {
    				alert('가입되었습니다');
    			}
    		} else {
    			event.preventDefault();
    			return false;
    		}
    	});
    	
    </script>
  </body>
</html>